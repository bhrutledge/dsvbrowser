<html>
<head>
    <title>{{ report.title|e }}</title>

    <link href="/static/css/normalize.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/theme.default.css" rel="stylesheet">
    <link href="/static/css/filter.formatter.css" rel="stylesheet">

    <script src="/static/js/jquery-1.10.2.min.js"></script>
    <script src="/static/js/jquery.tablesorter.min.js"></script>
    <script src="/static/js/jquery.tablesorter.widgets.min.js"></script>
    <script src="/static/js/jquery.tablesorter.widgets-filter-formatter.min.js"></script>
    <script src="/static/js/parsers/parser-input-select.js"></script>
    
    <script>
    $(function(){
        var $table = $('#report');
        $table.tablesorter({
            sortList : [[1,0]],
            widthFixed : true,
            widgets : ['zebra', 'stickyHeaders', 'filter'],
            headers: {
                0: { sorter: 'checkbox' },
            },
            widgetOptions: {
                filter_reset : "#clear-filters",
                filter_functions: {
                    0: { 
                        "Checked" : function(e, n, f, i) { return n === 'checked'; },
                        "Unchecked" : function(e, n, f, i) { return n === 'unchecked'; }
                    },
                },
            },
        });

        $('#check-visible').click(function() {
            $table.find('tbody :checkbox').prop('checked', false);
            $table.find('tbody tr:not(".filtered") :checkbox').prop('checked', true);
            $table.trigger('update');
        });

        $('#check-none').click(function() {
            $table.find('tbody :checkbox').prop('checked', false);
            $table.trigger('update');
        });
    });
    </script>
</head>

<body>
    <p><a href="/">home</a> &gt; <a href="/{{ subdir }}">{{ subdir }}</a> &gt; {{ report.slug }}</p>

    <h1>{{ report.title|e }}</h1>

    {% include '_controls.html' %}

    <table id="report">
        <thead>
            <tr>
                <th data-placeholder="All">Show</th>
            {% for item in report.head %}
                <th>{{ item|e }}</th>
            {% endfor %}
            </tr>
        </thead>
        <tbody>
        {% for row in report.body %}
            <tr>
                <td><input type="checkbox" /></td>
            {% for item in row %}    
                <td>{{ item|e }}</td>
            {% endfor %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
</body>
</html>
